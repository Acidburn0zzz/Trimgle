if(!$)throw new Error("jQuery required");var maxchar=25,signreview="review-index",signwatch="watch-index",_iAmInHome=function(){return $("#home.transition.visible").length>0},_iAmInReview=function(){return $("#toreview.transition.visible").length>0},_iAmInWatch=function(){return $("#towatch.transition.visible").length>0},_truncate=function(e,t){return t=t||maxchar,e.length>t&&(e=e.substring(0,t)+" ..."),e},_changePage=function(e,t,n){t=t||function(){},n=n||function(){};var i=function(){t(),$(e).transition("fade",500,function(){n()})};$(".mypage.transition.visible").length>0?$(".mypage.transition.visible").transition("fade",500,function(){i()}):i()},_loadAllReviews=function(e){var t=$.Trimgle.getAllReviews(),n=$("#toreview .row.container").first();n.html(""),$.each(t,function(t,i){if(e===!0&&$("#toreview .row.container ["+signreview+"='"+i["#"]+"']").length>0)return!0;var o=$("#proto_review").clone(!0);o.removeAttr("id"),o.find("a.pageurl").attr("href",i.page).text(i.title),o.find(".desc.page").text(i.desc),o.find(".dets.error").text(i.lasterror),o.find(".info.error").text("[ "+i.status+" ] "+new Date(i.when).toLocaleString()),o.find("img.avatar").attr("src",i.favicon).attr(signreview,i["#"]),""!=n.html()&&n.prepend('<div class="ui divider"></div>'),n.prepend(o.html()),o.remove()})},_loadAllWatchs=function(e){var t=$.Trimgle.getAllWatchs(),n=$("#towatch .row.container").first();n.html(""),$.each(t,function(t,i){if(e===!0&&$("#towatch .row.container ["+signwatch+"='"+i["#"]+"']").length>0)return!0;var o=$("#proto_watch").clone(!0);o.removeAttr("id"),o.find("a.pageurl").attr("href",i.page).text(i.title),o.find(".desc.page").text(i.desc),$.each(i.newdata,function(e,t){var n=""!=t.link&&""!=t.title?"<a href='"+t.link+"' target='_blank'>"+t.title+"</a>":""!=t.text?t.text:"";""!=n&&o.find(".bulleted.list").append("<div class='item'>"+n+"</div>")}),o.find("img.avatar").attr("src",i.favicon).attr(signwatch,i["#"]),""!=n.html()&&n.prepend('<div class="ui divider"></div>'),n.prepend(o.html()),o.remove()})},_goReview=function(e){$("#toreview .icon.remove").hide(),$("#toreview .loader").show(),setTimeout(function(){_loadAllReviews(e),e||_changePage("#toreview",function(){$("#popup").attr("cxx","toreview"),setTimeout(_cursorToReview,100)}),$("#toreview .loader").hide(),$("#toreview .icon.remove").show()},300)},_goWatch=function(e){$("#towatch .icon.remove").hide(),$("#towatch .loader").show(),setTimeout(function(){_loadAllWatchs(e),e||_changePage("#towatch",function(){$("#popup").attr("cxx","towatch"),setTimeout(_cursorToWatch,100)}),$("#towatch .loader").hide(),$("#towatch .icon.remove").show()},300)},_animateScroll=function(){$("#drag-scroll").transition("stop all").transition("hide").transition("clear queue"),$("#drag-scroll i").attr("class","icon large hand paper white"),$("#drag-scroll").transition("fade",500,function(){$("#drag-scroll i").attr("class","icon large hand rock white"),$("#drag-scroll").transition("bounce",1500,function(){$("#drag-scroll").transition("fade",500),$("#drag-scroll i").attr("class","icon large hand paper white")})})},_iconReadAll=function(e,t){e.length<1?t.hide():t.show()},_iconReadAllPage=function(){_iconReadAll($("#page .row.container .item"),$("#page .icon.read-all"))},_appendCursor=function(e,t,n){e[0].scrollHeight>$("#main").height()/100*t?(n===!0&&_animateScroll(),e.hasClass("drag scroll")||e.addClass("drag scroll")):e.removeClass("drag scroll")},_cursorToPage=function(e){_appendCursor($("#page .row.container"),83.5,e)},_cursorToHome=function(e){_appendCursor($("#home .row.container"),83.5,e)},_cursorToExplore=function(e){_appendCursor($("#explore .row.container"),83.5,e)},_cursorToReview=function(e){_appendCursor($("#toreview .row.container"),60.5,e)},_cursorToWatch=function(e){_appendCursor($("#towatch .row.container"),60.5,e)},_loadAllElements=function(){var e=$.Trimgle.getAllItems();$("#page-list").html(""),$.each(e,function(e,t){var n=$("#proto_item").clone(!0);n.removeAttr("id");var i=t.favicon;i&&""!=i||(i="img/unknown.png"),n.find("img.avatar").attr("src",i),n.find(".content .header").text(_truncate(t.title,20)),n.find(".content .header").attr("href",t.page),n.find(".content .description").text(_truncate(t.description,32)),n.find(".fast.stats").text(chrome.i18n.getMessage("every")+" "+t.interval),n.find("i.explore").on("click",function(e){$("#explore").attr("trimgle-item",t.addeded),$("a.section.explorator").text(_truncate(t.title,17)),$("a.section.explorator").attr("href",t.page),$("#bullet-list").html(""),$.each(t.newest,function(e,t){var n=""!=t.link&&""!=t.title?"<a href='"+t.link+"' target='_blank'>"+t.title+"</a>":""!=t.text?t.text:"";""!=n&&$("#bullet-list").append("<div class='item'>"+n+"</div>")}),_changePage("#explore",function(){$("#popup").attr("cxx","explore")},_cursorToExplore),e.stopPropagation()}),n.find("i.options").on("click",function(e){$("#page-edit").attr("trimgle-item",t.addeded);var n=localStorage["screenshot:"+t.addeded]||"img/unknown.screenshot.png";$("#page-edit-page").attr("href",t.page),$("img.screenshot").attr("src",n),$("#page-edit-title").val(t.title),$("#page-edit-desc").val(t.description),$("input[value='"+t.interval+"']").prop("checked",!0),$("#page-edit-webhook").val(t.pinglist.join("\r\n")),_changePage("#page-edit",function(){$("#popup").attr("cxx","page-edit"),setTimeout(function(){$("#page-edit-title").first().focus()},100)}),e.stopPropagation()}),n.find("i.remove").on("dblclick",function(e){$(this).popup("hide"),$.Trimgle.removeItem(t["#"],function(){n.remove()},function(){alert(chrome.i18n.getMessage("problem_inact"))}),e.stopPropagation()}),n.on("mouseover",function(){$(this).find(".row.options").show()}).on("mouseleave",function(){$(this).find(".row.options").hide()}),n.find("i.remove").popup({position:"top left",offset:-7,variation:"inverted",hoverable:!0,content:chrome.i18n.getMessage("ask_sure"),target:n.find("img.avatar").first()}),$("#page-list").prepend(n)})},_loadSettings=function(e){return(e=e||$.Trimgle.settings())?(1==e.notification?$(".icon.alarm").removeClass("mute"):$(".icon.alarm").hasClass("mute")||$(".icon.alarm").addClass("mute"),void $("#about-anon-info").prop("checked",!!e.sendAnonInfo)):(alert(chrome.i18n.getMessage("problem_inact")+" ( 100 )"),!1)},_goHome=function(){_loadAllElements(),_changePage("#home",function(){$("#popup").attr("cxx","home"),setTimeout(_cursorToHome,100)},function(){_showNews()})},_autoPosition=function(){var e=$.Trimgle.getAllReviews();if(e.length>0)return _goReview();var t=$.Trimgle.getAllWatchs();return t.length>0?_goWatch():void _goHome()},_showNews=function(){var e=$.Trimgle.settings();return e&&""!==e.lastNews&&e.lastNews!==e.oldNews?($("#home h2.title").popup({on:"manual",position:"top center",context:"#home",exclusive:!0,closable:!1,variation:"inverted",hoverable:!1,html:chrome.i18n.getMessage("popup_news")+" <a href='"+e.lastNews+"' target='_blank'>"+chrome.i18n.getMessage("news")+"</a> !"}).popup("show"),e.oldNews=e.lastNews,void $.Trimgle.settings(e)):!1},_noJobs=function(e){$("#home h2.title").popup({on:"manual",position:"top center",context:"#home",exclusive:!1,closable:!1,variation:"inverted",hoverable:!1,content:chrome.i18n.getMessage("no_jobs")}).popup(e)};
//# sourceMappingURL=global.min.js.map